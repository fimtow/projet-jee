!function(){function o(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function n(o,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"kf/V":function(t,e,i){"use strict";i.r(e),i.d(e,"PostPageModule",function(){return w});var c=i("ofXK"),s=i("3Pt+"),r=i("TEn/"),b=i("tyNb"),a=i("vkgz"),d=i("fXoL"),l=i("P7CE"),p=i("npAJ"),f=function(o){return["/topic",o]};function g(o,n){if(1&o&&(d.Ob(0,"div",31),d.Ob(1,"a",32),d.lc(2),d.Nb(),d.Nb()),2&o){var t=d.ac();d.zb(1),d.dc("routerLink",d.ec(2,f,t.postInfos.post.topic.id)),d.zb(1),d.nc("t/",t.postInfos.post.topic.title,"")}}function m(o,n){if(1&o&&(d.Ob(0,"div",31),d.Ob(1,"a",32),d.lc(2),d.Nb(),d.Nb()),2&o){var t=d.ac();d.zb(1),d.dc("routerLink",d.ec(2,f,t.postInfos.post.topic.id)),d.zb(1),d.nc("ev/",t.postInfos.post.topic.title,"")}}function u(o,n){if(1&o&&(d.Ob(0,"div",33),d.Kb(1,"img",34),d.Nb()),2&o){var t=d.ac();d.zb(1),d.Ab("src",t.getImageURL(),d.ic)}}function O(o,n){if(1&o&&(d.Ob(0,"div",33),d.lc(1),d.Nb()),2&o){var t=d.ac();d.zb(1),d.nc(" ",t.postInfos.post.content.text," ")}}function h(o,n){if(1&o){var t=d.Pb();d.Ob(0,"div",35),d.Kb(1,"img",36),d.Ob(2,"div",37),d.Ob(3,"ion-grid",5),d.Ob(4,"ion-row"),d.Ob(5,"ion-col",38),d.Kb(6,"ion-icon",39),d.lc(7),d.Nb(),d.Ob(8,"ion-col",40),d.Kb(9,"ion-icon",41),d.lc(10),d.Nb(),d.Nb(),d.Ob(11,"ion-row"),d.Ob(12,"ion-col",38),d.Kb(13,"ion-icon",42),d.lc(14),d.Nb(),d.Ob(15,"ion-col",40),d.Kb(16,"ion-icon",43),d.lc(17),d.Nb(),d.Nb(),d.Ob(18,"ion-row"),d.Ob(19,"ion-col",44),d.Ob(20,"ion-button",45),d.Wb("click",function(){return d.hc(t),d.ac().joinTopic()}),d.lc(21),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&o){var e=d.ac();d.zb(7),d.nc(" ",e.postInfos.post.content.description," "),d.zb(3),d.nc(" ",e.postInfos.post.content.date," "),d.zb(4),d.nc(" ",e.postInfos.post.content.location," "),d.zb(3),d.nc(" ",e.postInfos.post.content.joined," "),d.zb(3),d.dc("disabled",e.joined),d.zb(1),d.nc(" ",e.joinbtn," ")}}function x(o,n){1&o&&(d.Ob(0,"ion-row"),d.Ob(1,"ion-col",46),d.Ob(2,"div"),d.lc(3,"No comment !"),d.Nb(),d.Kb(4,"hr"),d.Nb(),d.Nb())}function N(o,n){if(1&o&&(d.Mb(0),d.Ob(1,"ion-row"),d.Ob(2,"ion-col",47),d.Kb(3,"img",48),d.Nb(),d.Ob(4,"ion-col",49),d.Ob(5,"ion-grid",50),d.Ob(6,"ion-row"),d.Ob(7,"ion-col",1),d.lc(8),d.Nb(),d.Nb(),d.Ob(9,"ion-row"),d.Ob(10,"ion-col",1),d.Ob(11,"div",51),d.lc(12),d.Nb(),d.Nb(),d.Nb(),d.Ob(13,"ion-row"),d.Ob(14,"ion-col",52),d.Ob(15,"div"),d.Kb(16,"hr",53),d.Ob(17,"div",54),d.Kb(18,"ion-icon",7),d.lc(19),d.Kb(20,"ion-icon",55),d.lc(21),d.Nb(),d.Kb(22,"hr",53),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Kb(23,"hr"),d.Lb()),2&o){var t=n.$implicit;d.zb(8),d.oc(" u/",t.user.username," - ",t.date," "),d.zb(4),d.mc(t.text),d.zb(7),d.nc(" ",t.likes," likes "),d.zb(2),d.nc(" ",t.dislikes," dislikes ")}}var v,C,z,k=[{path:"",component:(v=function(){function t(n,e,i,c,s,r,b){o(this,t),this.route=n,this.feedService=e,this.navCtrl=i,this.loadingCtrl=c,this.authService=s,this.formBuilder=r,this.alertCtrl=b,this.id="",this.postInfos={success:!1,post:{user:{username:""},content:{url:"",text:"",joined:0},topic:{title:""}}},this.isAuthenticated=!1,this.joinbtn="Join",this.joined=!1,this.comments=[],this.commentform=r.group({text:[""]})}var e,i,c;return e=t,(i=[{key:"ngOnInit",value:function(){var o=this;this.authService.autoLogin().subscribe(function(n){o.isAuthenticated=n,console.log(n)}),this.id=this.route.snapshot.paramMap.get("id"),this.loadingCtrl.create({spinner:"crescent"}).then(function(n){n.present(),o.feedService.getPostInfo(o.id).pipe(Object(a.a)(function(t){t.success?(t.post.title=o.titleCaseWord(t.post.title),o.postInfos=t,o.comments=t.comments,console.log("Comments : ",o.comments),console.log(o.postInfos),2==t.post.type&&o.feedService.getTopicInfo(t.post.topic.id).subscribe(function(n){n.joined&&(o.joined=!0,o.joinbtn="joined")}),n.dismiss()):(n.dismiss(),o.navCtrl.navigateRoot("/error/notfound"))})).subscribe()})}},{key:"titleCaseWord",value:function(o){return o?o[0].toUpperCase()+o.substr(1):o}},{key:"joinTopic",value:function(){var o=this;this.isAuthenticated?(this.joinbtn="Joining",this.loadingCtrl.create({spinner:"crescent"}).then(function(n){n.present(),o.feedService.joinTopic(o.postInfos.post.topic.id).pipe(Object(a.a)(function(t){console.log(t),t.success?(o.joined=!0,o.joinbtn="joined",o.postInfos.post.content.joined+=1,n.dismiss()):(n.dismiss(),o.alertCtrl.create({header:"Something wrong",message:"Please try again later ...",buttons:["Ok"]}).then(function(o){o.present()}))},function(t){console.log(t),n.dismiss(),o.alertCtrl.create({header:"An error has occured",message:t.error.message?t.error.message:"Failed to communicate with server. Please try again later ...",buttons:["Ok"]}).then(function(o){o.present()})})).subscribe(),n.dismiss(),o.joined=!0,o.joinbtn="Joined"})):this.navCtrl.navigateRoot("/login")}},{key:"comment",value:function(){var o=this;this.loadingCtrl.create({spinner:"crescent"}).then(function(n){n.present(),o.feedService.subcomment(o.id,o.commentform.value.text).subscribe(function(t){console.log(t),t.success?(n.dismiss(),o.commentform.reset(),o.feedService.getPostInfo(o.id).pipe(Object(a.a)(function(n){n.success?(o.comments=n.comments,console.log("Comments : ",o.comments)):o.navCtrl.navigateRoot("/error/notfound")})).subscribe()):(n.dismiss(),o.alertCtrl.create({header:"Something wrong",message:"Please retry again !",buttons:["Ok"]}).then(function(o){o.present()}),console.log("Commenting failed"))})})}},{key:"getImageURL",value:function(){if(this.postInfos.post.content&&this.postInfos.post.content.url)return this.postInfos.post.content.url}}])&&n(e.prototype,i),c&&n(e,c),t}(),v.\u0275fac=function(o){return new(o||v)(d.Jb(b.a),d.Jb(l.a),d.Jb(r.H),d.Jb(r.G),d.Jb(p.a),d.Jb(s.b),d.Jb(r.a))},v.\u0275cmp=d.Db({type:v,selectors:[["app-post"]],decls:66,vars:13,consts:[[1,"has-header"],["size","12"],[1,"backgrnd"],[1,"image"],["size","7","offset","1",2,"--ion-background-color","#fff"],["fixed",""],["size","1",1,"likescase","ion-text-center"],["name","heart-outline"],["name","heart-dislike-outline"],["size","11"],[1,"date"],["class","title",4,"ngIf"],["style","padding: 0 15px 15px 15px;","class","content",4,"ngIf"],["class","invitation",4,"ngIf"],[2,"background-color","#eeeeee","height","40px"],[1,"commtitle"],[1,"ion-padding"],["offset","1","size","11"],[3,"formGroup"],["size","12 "],["formControlName","text","type","text ","placeholder","Place your comment here. "],["offset","9","size","3"],["expand","block ","fill","clear ","shape","round ",1,"commentbtn",3,"click"],[1,"ion-padding","comments-title"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","3 "],[1,"widget","w-center"],[1,"profiler"],["src","../../../assets/profile.jpg "],["size","5 "],[1,"title"],[3,"routerLink"],[1,"content",2,"padding","0 15px 15px 15px"],["alt","Cannot load"],[1,"invitation"],["src","../../../assets/event-invitation-redimg.jpg",1,"inv-img"],[1,"invInfos"],["offset","1","size","6"],["name","information-circle-outline",1,"infoicons"],["size","4"],["name","calendar-outline",1,"infoicons"],["name","location-outline",1,"infoicons"],["name","people-outline",1,"infoicons"],["offset","2","size","8"],["expand","block","fill","clear",1,"postbtn",3,"disabled","click"],["offset","2","size","10"],["offset","2","size","1"],["src","../../../assets/avatar.jpg",1,"commavatar"],["size","9"],["fixed","",1,"ion-no-padding"],[1,"commtext"],["size","8"],[1,"commhr"],[2,"padding","2px 5px 2px 5px"],["name","heart-dislike-outline",2,"padding-left","15px"]],template:function(o,n){1&o&&(d.Ob(0,"ion-header"),d.Kb(1,"ion-toolbar"),d.Nb(),d.Ob(2,"ion-content",0),d.Ob(3,"ion-grid"),d.Ob(4,"ion-row"),d.Ob(5,"ion-col",1),d.Kb(6,"div",2),d.Kb(7,"div",3),d.Nb(),d.Nb(),d.Ob(8,"ion-row"),d.Ob(9,"ion-col",4),d.Ob(10,"ion-grid",5),d.Ob(11,"ion-row"),d.Ob(12,"ion-col"),d.Ob(13,"ion-grid",5),d.Ob(14,"ion-card"),d.Ob(15,"ion-row"),d.Ob(16,"ion-col",6),d.Kb(17,"ion-icon",7),d.lc(18),d.Kb(19,"hr"),d.Kb(20,"ion-icon",8),d.lc(21),d.Nb(),d.Ob(22,"ion-col",9),d.Ob(23,"ion-card-header"),d.Ob(24,"ion-card-subtitle",10),d.lc(25),d.Nb(),d.Nb(),d.kc(26,g,3,4,"div",11),d.kc(27,m,3,4,"div",11),d.Ob(28,"ion-card-header"),d.Ob(29,"ion-card-title"),d.lc(30),d.Nb(),d.Nb(),d.kc(31,u,2,1,"div",12),d.kc(32,O,2,1,"div",12),d.kc(33,h,22,6,"div",13),d.Nb(),d.Nb(),d.Nb(),d.Ob(34,"ion-card"),d.Ob(35,"ion-row",14),d.Ob(36,"ion-col",1),d.Ob(37,"div",15),d.lc(38,"PLACE A COMMENT"),d.Nb(),d.Nb(),d.Nb(),d.Ob(39,"ion-row",16),d.Ob(40,"ion-col",17),d.Ob(41,"form",18),d.Ob(42,"ion-grid",5),d.Ob(43,"ion-row"),d.Ob(44,"ion-col",19),d.Kb(45,"ion-textarea",20),d.Nb(),d.Nb(),d.Ob(46,"ion-row"),d.Ob(47,"ion-col",21),d.Ob(48,"ion-button",22),d.Wb("click",function(){return n.comment()}),d.lc(49," Comment "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(50,"ion-row",23),d.Ob(51,"ion-col",17),d.lc(52," Comments : "),d.Nb(),d.Nb(),d.kc(53,x,5,0,"ion-row",24),d.kc(54,N,24,5,"ng-container",25),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(55,"ion-col",26),d.Ob(56,"div",27),d.Ob(57,"h4",28),d.lc(58,"Author"),d.Nb(),d.Ob(59,"ion-grid",5),d.Ob(60,"ion-row"),d.Ob(61,"ion-col",26),d.Kb(62,"ion-img",29),d.Nb(),d.Ob(63,"ion-col",30),d.lc(64),d.Nb(),d.Nb(),d.Nb(),d.Kb(65,"hr"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()),2&o&&(d.zb(18),d.nc(" ",n.postInfos.post.likes," "),d.zb(3),d.nc(" ",n.postInfos.post.dislikes," "),d.zb(4),d.mc(n.postInfos.post.date),d.zb(1),d.dc("ngIf",n.postInfos.success&&(0==n.postInfos.post.type||1==n.postInfos.post.type)),d.zb(1),d.dc("ngIf",n.postInfos.success&&2==n.postInfos.post.type),d.zb(3),d.mc(n.postInfos.post.title),d.zb(1),d.dc("ngIf",n.postInfos.success&&0==n.postInfos.post.type),d.zb(1),d.dc("ngIf",n.postInfos.success&&1==n.postInfos.post.type),d.zb(1),d.dc("ngIf",n.postInfos.success&&2==n.postInfos.post.type),d.zb(8),d.dc("formGroup",n.commentform),d.zb(12),d.dc("ngIf",0==n.comments.length),d.zb(1),d.dc("ngForOf",n.comments),d.zb(10),d.nc(" ",n.postInfos.post.user.username," "))},directives:[r.p,r.D,r.m,r.o,r.x,r.l,r.h,r.q,r.i,r.j,c.i,r.k,s.p,s.j,s.d,r.B,r.L,s.i,s.c,r.f,c.h,r.r,b.i,r.J],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f2f2f2}ion-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #c7c7c7;margin:0 0 10px 10px;border-radius:0;text-decoration:none}h2.topics[_ngcontent-%COMP%]{margin-left:20px;border-bottom:1px solid #bbb;color:#adadad}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#dd4e35;color:#fff;font-family:Courier New,Courier,sans-serif}ion-title[_ngcontent-%COMP%]{font-size:17px}.widget[_ngcontent-%COMP%]{float:left;width:100%;background-color:#fff;border-left:1px solid #e4e4e4;border-right:1px solid #e4e4e4;border-bottom:1px solid #e4e4e4;margin-bottom:20px;-ms-box-shadow:0 2px #e4e4e4;-o-box-shadow:0 2px #e4e4e4;box-shadow:0 2px #e4e4e4}.w-center[_ngcontent-%COMP%]{text-align:center}.backgrnd[_ngcontent-%COMP%]{position:relative;height:15%}.image[_ngcontent-%COMP%], img.img-avatar[_ngcontent-%COMP%]{position:absolute}img.img-avatar[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;left:10%;transform:translateY(-60%)}h4.profiler[_ngcontent-%COMP%]{background-color:#e06b56;margin:0;padding-top:10px;padding-bottom:10px;color:#fff}.joined[_ngcontent-%COMP%]{padding:5px 0 0 10px}.joindate[_ngcontent-%COMP%]{padding-top:10px;padding-left:5px;color:#696767}.jointext[_ngcontent-%COMP%]{font-weight:550}h4.usertopics[_ngcontent-%COMP%]{background-color:#e06b56;margin:0;padding-top:10px;padding-bottom:10px;color:#fff}.likescase[_ngcontent-%COMP%]{background-color:#eee}.title[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:0}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f3f3f;font-size:medium;font-weight:bolder!important;text-decoration:none}.invitation[_ngcontent-%COMP%]{padding:10px 5px;margin:0 16px 16px;border:2px solid #e06b56;border-radius:6px}img.inv-img[_ngcontent-%COMP%]{height:200px;width:200px;border-radius:50%;position:relative;left:50%;transform:translateX(-50%)}.infoicons[_ngcontent-%COMP%]{padding:5%;height:30px;width:30px;color:#dd4e35}.invInfos[_ngcontent-%COMP%]{font-size:large}ion-button.postbtn[_ngcontent-%COMP%]{background-color:#e06b56;color:#fff;font-weight:700;border-radius:10px;margin-top:5%}ion-card-subtitle.date[_ngcontent-%COMP%]{position:relative;float:right;--ion-padding-top:0}ion-button.commentbtn[_ngcontent-%COMP%]{border:2px solid #3880ff;font-weight:700;border-radius:5px}ion-textarea[_ngcontent-%COMP%]{height:100px;font-size:medium;border-radius:5px;border:1px solid #d4d4d4;padding-left:5px}.commtitle[_ngcontent-%COMP%]{padding-top:10px;position:relative;left:40%}.comments-title[_ngcontent-%COMP%]{padding-left:30px}.commtext[_ngcontent-%COMP%]{padding:10px;color:#3f3f3f;font-size:large}hr.commhr[_ngcontent-%COMP%]{background-color:#e7e7e7!important}"]}),v)}],P=((z=function n(){o(this,n)}).\u0275mod=d.Hb({type:z}),z.\u0275inj=d.Gb({factory:function(o){return new(o||z)},imports:[[b.j.forChild(k)],b.j]}),z),w=((C=function n(){o(this,n)}).\u0275mod=d.Hb({type:C}),C.\u0275inj=d.Gb({factory:function(o){return new(o||C)},imports:[[c.b,s.e,r.E,P,s.m]]}),C)}}])}();