(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"kf/V":function(o,t,n){"use strict";n.r(t),n.d(t,"PostPageModule",function(){return C});var e=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),r=n("vkgz"),b=n("fXoL"),a=n("P7CE"),d=n("npAJ");const p=function(o){return["/topic",o]};function l(o,t){if(1&o&&(b.Ob(0,"div",31),b.Ob(1,"a",32),b.lc(2),b.Nb(),b.Nb()),2&o){const o=b.ac();b.zb(1),b.dc("routerLink",b.ec(2,p,o.postInfos.post.topic.id)),b.zb(1),b.nc("t/",o.postInfos.post.topic.title,"")}}function f(o,t){if(1&o&&(b.Ob(0,"div",31),b.Ob(1,"a",32),b.lc(2),b.Nb(),b.Nb()),2&o){const o=b.ac();b.zb(1),b.dc("routerLink",b.ec(2,p,o.postInfos.post.topic.id)),b.zb(1),b.nc("ev/",o.postInfos.post.topic.title,"")}}function g(o,t){if(1&o&&(b.Ob(0,"div",33),b.Kb(1,"img",34),b.Nb()),2&o){const o=b.ac();b.zb(1),b.Ab("src",o.getImageURL(),b.ic)}}function m(o,t){if(1&o&&(b.Ob(0,"div",33),b.lc(1),b.Nb()),2&o){const o=b.ac();b.zb(1),b.nc(" ",o.postInfos.post.content.text," ")}}function h(o,t){if(1&o){const o=b.Pb();b.Ob(0,"div",35),b.Kb(1,"img",36),b.Ob(2,"div",37),b.Ob(3,"ion-grid",5),b.Ob(4,"ion-row"),b.Ob(5,"ion-col",38),b.Kb(6,"ion-icon",39),b.lc(7),b.Nb(),b.Ob(8,"ion-col",40),b.Kb(9,"ion-icon",41),b.lc(10),b.Nb(),b.Nb(),b.Ob(11,"ion-row"),b.Ob(12,"ion-col",38),b.Kb(13,"ion-icon",42),b.lc(14),b.Nb(),b.Ob(15,"ion-col",40),b.Kb(16,"ion-icon",43),b.lc(17),b.Nb(),b.Nb(),b.Ob(18,"ion-row"),b.Ob(19,"ion-col",44),b.Ob(20,"ion-button",45),b.Wb("click",function(){return b.hc(o),b.ac().joinTopic()}),b.lc(21),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()}if(2&o){const o=b.ac();b.zb(7),b.nc(" ",o.postInfos.post.content.description," "),b.zb(3),b.nc(" ",o.postInfos.post.content.date," "),b.zb(4),b.nc(" ",o.postInfos.post.content.location," "),b.zb(3),b.nc(" ",o.postInfos.post.content.joined," "),b.zb(3),b.dc("disabled",o.joined),b.zb(1),b.nc(" ",o.joinbtn," ")}}function O(o,t){1&o&&(b.Ob(0,"ion-row"),b.Ob(1,"ion-col",46),b.Ob(2,"div"),b.lc(3,"No comment !"),b.Nb(),b.Kb(4,"hr"),b.Nb(),b.Nb())}function u(o,t){if(1&o&&(b.Mb(0),b.Ob(1,"ion-row"),b.Ob(2,"ion-col",47),b.Kb(3,"img",48),b.Nb(),b.Ob(4,"ion-col",49),b.Ob(5,"ion-grid",50),b.Ob(6,"ion-row"),b.Ob(7,"ion-col",1),b.lc(8),b.Nb(),b.Nb(),b.Ob(9,"ion-row"),b.Ob(10,"ion-col",1),b.Ob(11,"div",51),b.lc(12),b.Nb(),b.Nb(),b.Nb(),b.Ob(13,"ion-row"),b.Ob(14,"ion-col",52),b.Ob(15,"div"),b.Kb(16,"hr",53),b.Ob(17,"div",54),b.Kb(18,"ion-icon",7),b.lc(19),b.Kb(20,"ion-icon",55),b.lc(21),b.Nb(),b.Kb(22,"hr",53),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Kb(23,"hr"),b.Lb()),2&o){const o=t.$implicit;b.zb(8),b.oc(" u/",o.user.username," - ",o.date," "),b.zb(4),b.mc(o.text),b.zb(7),b.nc(" ",o.likes," likes "),b.zb(2),b.nc(" ",o.dislikes," dislikes ")}}const x=[{path:"",component:(()=>{class o{constructor(o,t,n,e,i,s,c){this.route=o,this.feedService=t,this.navCtrl=n,this.loadingCtrl=e,this.authService=i,this.formBuilder=s,this.alertCtrl=c,this.id="",this.postInfos={success:!1,post:{user:{username:""},content:{url:"",text:"",joined:0},topic:{title:""}}},this.isAuthenticated=!1,this.joinbtn="Join",this.joined=!1,this.comments=[],this.commentform=s.group({text:[""]})}ngOnInit(){this.authService.autoLogin().subscribe(o=>{this.isAuthenticated=o,console.log(o)}),this.id=this.route.snapshot.paramMap.get("id"),this.loadingCtrl.create({spinner:"crescent"}).then(o=>{o.present(),this.feedService.getPostInfo(this.id).pipe(Object(r.a)(t=>{t.success?(t.post.title=this.titleCaseWord(t.post.title),this.postInfos=t,this.comments=t.comments,console.log("Comments : ",this.comments),console.log(this.postInfos),2==t.post.type&&this.feedService.getTopicInfo(t.post.topic.id).subscribe(o=>{o.joined&&(this.joined=!0,this.joinbtn="joined")}),o.dismiss()):(o.dismiss(),this.navCtrl.navigateRoot("/error/notfound"))})).subscribe()})}titleCaseWord(o){return o?o[0].toUpperCase()+o.substr(1):o}joinTopic(){this.isAuthenticated?(this.joinbtn="Joining",this.loadingCtrl.create({spinner:"crescent"}).then(o=>{o.present(),this.feedService.joinTopic(this.postInfos.post.topic.id).pipe(Object(r.a)(t=>{console.log(t),t.success?(this.joined=!0,this.joinbtn="joined",this.postInfos.post.content.joined+=1,o.dismiss()):(o.dismiss(),this.alertCtrl.create({header:"Something wrong",message:"Please try again later ...",buttons:["Ok"]}).then(o=>{o.present()}))},t=>{console.log(t),o.dismiss(),this.alertCtrl.create({header:"An error has occured",message:t.error.message?t.error.message:"Failed to communicate with server. Please try again later ...",buttons:["Ok"]}).then(o=>{o.present()})})).subscribe(),o.dismiss(),this.joined=!0,this.joinbtn="Joined"})):this.navCtrl.navigateRoot("/login")}comment(){this.loadingCtrl.create({spinner:"crescent"}).then(o=>{o.present(),this.feedService.subcomment(this.id,this.commentform.value.text).subscribe(t=>{console.log(t),t.success?(o.dismiss(),this.commentform.reset(),this.feedService.getPostInfo(this.id).pipe(Object(r.a)(o=>{o.success?(this.comments=o.comments,console.log("Comments : ",this.comments)):this.navCtrl.navigateRoot("/error/notfound")})).subscribe()):(o.dismiss(),this.alertCtrl.create({header:"Something wrong",message:"Please retry again !",buttons:["Ok"]}).then(o=>{o.present()}),console.log("Commenting failed"))})})}getImageURL(){if(this.postInfos.post.content&&this.postInfos.post.content.url)return this.postInfos.post.content.url}}return o.\u0275fac=function(t){return new(t||o)(b.Jb(c.a),b.Jb(a.a),b.Jb(s.H),b.Jb(s.G),b.Jb(d.a),b.Jb(i.b),b.Jb(s.a))},o.\u0275cmp=b.Db({type:o,selectors:[["app-post"]],decls:66,vars:13,consts:[[1,"has-header"],["size","12"],[1,"backgrnd"],[1,"image"],["size","7","offset","1",2,"--ion-background-color","#fff"],["fixed",""],["size","1",1,"likescase","ion-text-center"],["name","heart-outline"],["name","heart-dislike-outline"],["size","11"],[1,"date"],["class","title",4,"ngIf"],["style","padding: 0 15px 15px 15px;","class","content",4,"ngIf"],["class","invitation",4,"ngIf"],[2,"background-color","#eeeeee","height","40px"],[1,"commtitle"],[1,"ion-padding"],["offset","1","size","11"],[3,"formGroup"],["size","12 "],["formControlName","text","type","text ","placeholder","Place your comment here. "],["offset","9","size","3"],["expand","block ","fill","clear ","shape","round ",1,"commentbtn",3,"click"],[1,"ion-padding","comments-title"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","3 "],[1,"widget","w-center"],[1,"profiler"],["src","../../../assets/profile.jpg "],["size","5 "],[1,"title"],[3,"routerLink"],[1,"content",2,"padding","0 15px 15px 15px"],["alt","Cannot load"],[1,"invitation"],["src","../../../assets/event-invitation-redimg.jpg",1,"inv-img"],[1,"invInfos"],["offset","1","size","6"],["name","information-circle-outline",1,"infoicons"],["size","4"],["name","calendar-outline",1,"infoicons"],["name","location-outline",1,"infoicons"],["name","people-outline",1,"infoicons"],["offset","2","size","8"],["expand","block","fill","clear",1,"postbtn",3,"disabled","click"],["offset","2","size","10"],["offset","2","size","1"],["src","../../../assets/avatar.jpg",1,"commavatar"],["size","9"],["fixed","",1,"ion-no-padding"],[1,"commtext"],["size","8"],[1,"commhr"],[2,"padding","2px 5px 2px 5px"],["name","heart-dislike-outline",2,"padding-left","15px"]],template:function(o,t){1&o&&(b.Ob(0,"ion-header"),b.Kb(1,"ion-toolbar"),b.Nb(),b.Ob(2,"ion-content",0),b.Ob(3,"ion-grid"),b.Ob(4,"ion-row"),b.Ob(5,"ion-col",1),b.Kb(6,"div",2),b.Kb(7,"div",3),b.Nb(),b.Nb(),b.Ob(8,"ion-row"),b.Ob(9,"ion-col",4),b.Ob(10,"ion-grid",5),b.Ob(11,"ion-row"),b.Ob(12,"ion-col"),b.Ob(13,"ion-grid",5),b.Ob(14,"ion-card"),b.Ob(15,"ion-row"),b.Ob(16,"ion-col",6),b.Kb(17,"ion-icon",7),b.lc(18),b.Kb(19,"hr"),b.Kb(20,"ion-icon",8),b.lc(21),b.Nb(),b.Ob(22,"ion-col",9),b.Ob(23,"ion-card-header"),b.Ob(24,"ion-card-subtitle",10),b.lc(25),b.Nb(),b.Nb(),b.kc(26,l,3,4,"div",11),b.kc(27,f,3,4,"div",11),b.Ob(28,"ion-card-header"),b.Ob(29,"ion-card-title"),b.lc(30),b.Nb(),b.Nb(),b.kc(31,g,2,1,"div",12),b.kc(32,m,2,1,"div",12),b.kc(33,h,22,6,"div",13),b.Nb(),b.Nb(),b.Nb(),b.Ob(34,"ion-card"),b.Ob(35,"ion-row",14),b.Ob(36,"ion-col",1),b.Ob(37,"div",15),b.lc(38,"PLACE A COMMENT"),b.Nb(),b.Nb(),b.Nb(),b.Ob(39,"ion-row",16),b.Ob(40,"ion-col",17),b.Ob(41,"form",18),b.Ob(42,"ion-grid",5),b.Ob(43,"ion-row"),b.Ob(44,"ion-col",19),b.Kb(45,"ion-textarea",20),b.Nb(),b.Nb(),b.Ob(46,"ion-row"),b.Ob(47,"ion-col",21),b.Ob(48,"ion-button",22),b.Wb("click",function(){return t.comment()}),b.lc(49," Comment "),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(50,"ion-row",23),b.Ob(51,"ion-col",17),b.lc(52," Comments : "),b.Nb(),b.Nb(),b.kc(53,O,5,0,"ion-row",24),b.kc(54,u,24,5,"ng-container",25),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(55,"ion-col",26),b.Ob(56,"div",27),b.Ob(57,"h4",28),b.lc(58,"Author"),b.Nb(),b.Ob(59,"ion-grid",5),b.Ob(60,"ion-row"),b.Ob(61,"ion-col",26),b.Kb(62,"ion-img",29),b.Nb(),b.Ob(63,"ion-col",30),b.lc(64),b.Nb(),b.Nb(),b.Nb(),b.Kb(65,"hr"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&o&&(b.zb(18),b.nc(" ",t.postInfos.post.likes," "),b.zb(3),b.nc(" ",t.postInfos.post.dislikes," "),b.zb(4),b.mc(t.postInfos.post.date),b.zb(1),b.dc("ngIf",t.postInfos.success&&(0==t.postInfos.post.type||1==t.postInfos.post.type)),b.zb(1),b.dc("ngIf",t.postInfos.success&&2==t.postInfos.post.type),b.zb(3),b.mc(t.postInfos.post.title),b.zb(1),b.dc("ngIf",t.postInfos.success&&0==t.postInfos.post.type),b.zb(1),b.dc("ngIf",t.postInfos.success&&1==t.postInfos.post.type),b.zb(1),b.dc("ngIf",t.postInfos.success&&2==t.postInfos.post.type),b.zb(8),b.dc("formGroup",t.commentform),b.zb(12),b.dc("ngIf",0==t.comments.length),b.zb(1),b.dc("ngForOf",t.comments),b.zb(10),b.nc(" ",t.postInfos.post.user.username," "))},directives:[s.p,s.D,s.m,s.o,s.x,s.l,s.h,s.q,s.i,s.j,e.i,s.k,i.p,i.j,i.d,s.B,s.L,i.i,i.c,s.f,e.h,s.r,c.i,s.J],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f2f2f2}ion-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #c7c7c7;margin:0 0 10px 10px;border-radius:0;text-decoration:none}h2.topics[_ngcontent-%COMP%]{margin-left:20px;border-bottom:1px solid #bbb;color:#adadad}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#dd4e35;color:#fff;font-family:Courier New,Courier,sans-serif}ion-title[_ngcontent-%COMP%]{font-size:17px}.widget[_ngcontent-%COMP%]{float:left;width:100%;background-color:#fff;border-left:1px solid #e4e4e4;border-right:1px solid #e4e4e4;border-bottom:1px solid #e4e4e4;margin-bottom:20px;-ms-box-shadow:0 2px #e4e4e4;-o-box-shadow:0 2px #e4e4e4;box-shadow:0 2px #e4e4e4}.w-center[_ngcontent-%COMP%]{text-align:center}.backgrnd[_ngcontent-%COMP%]{position:relative;height:15%}.image[_ngcontent-%COMP%], img.img-avatar[_ngcontent-%COMP%]{position:absolute}img.img-avatar[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;left:10%;transform:translateY(-60%)}h4.profiler[_ngcontent-%COMP%]{background-color:#e06b56;margin:0;padding-top:10px;padding-bottom:10px;color:#fff}.joined[_ngcontent-%COMP%]{padding:5px 0 0 10px}.joindate[_ngcontent-%COMP%]{padding-top:10px;padding-left:5px;color:#696767}.jointext[_ngcontent-%COMP%]{font-weight:550}h4.usertopics[_ngcontent-%COMP%]{background-color:#e06b56;margin:0;padding-top:10px;padding-bottom:10px;color:#fff}.likescase[_ngcontent-%COMP%]{background-color:#eee}.title[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:0}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f3f3f;font-size:medium;font-weight:bolder!important;text-decoration:none}.invitation[_ngcontent-%COMP%]{padding:10px 5px;margin:0 16px 16px;border:2px solid #e06b56;border-radius:6px}img.inv-img[_ngcontent-%COMP%]{height:200px;width:200px;border-radius:50%;position:relative;left:50%;transform:translateX(-50%)}.infoicons[_ngcontent-%COMP%]{padding:5%;height:30px;width:30px;color:#dd4e35}.invInfos[_ngcontent-%COMP%]{font-size:large}ion-button.postbtn[_ngcontent-%COMP%]{background-color:#e06b56;color:#fff;font-weight:700;border-radius:10px;margin-top:5%}ion-card-subtitle.date[_ngcontent-%COMP%]{position:relative;float:right;--ion-padding-top:0}ion-button.commentbtn[_ngcontent-%COMP%]{border:2px solid #3880ff;font-weight:700;border-radius:5px}ion-textarea[_ngcontent-%COMP%]{height:100px;font-size:medium;border-radius:5px;border:1px solid #d4d4d4;padding-left:5px}.commtitle[_ngcontent-%COMP%]{padding-top:10px;position:relative;left:40%}.comments-title[_ngcontent-%COMP%]{padding-left:30px}.commtext[_ngcontent-%COMP%]{padding:10px;color:#3f3f3f;font-size:large}hr.commhr[_ngcontent-%COMP%]{background-color:#e7e7e7!important}"]}),o})()}];let N=(()=>{class o{}return o.\u0275mod=b.Hb({type:o}),o.\u0275inj=b.Gb({factory:function(t){return new(t||o)},imports:[[c.j.forChild(x)],c.j]}),o})(),C=(()=>{class o{}return o.\u0275mod=b.Hb({type:o}),o.\u0275inj=b.Gb({factory:function(t){return new(t||o)},imports:[[e.b,i.e,s.E,N,i.m]]}),o})()}}]);